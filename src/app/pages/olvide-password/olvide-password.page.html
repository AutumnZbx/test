<ion-content class="ion-padding">
  <button (click)="logout()">Volver</button>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Cambiar Contraseña</ion-card-title>
    </ion-card-header>
    <ion-card-content *ngIf="!stepCompleted">
      <form [formGroup]="recoveryForm" (ngSubmit)="onSubmit()">
        <ng-container *ngIf="!hasSecurityQuestion">
          <ion-item>
            <ion-label position="floating">Pregunta de seguridad</ion-label>
            <ion-select formControlName="pregunta">
              <ion-select-option *ngFor="let p of preguntas" [value]="p">{{ p }}</ion-select-option>
            </ion-select>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Respuesta</ion-label>
            <ion-input formControlName="respuesta"></ion-input>
          </ion-item>
        </ng-container>

        <ion-item>
          <ion-label position="floating">Nueva Contraseña</ion-label>
          <ion-input type="password" formControlName="nueva"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Confirmar Contraseña</ion-label>
          <ion-input type="password" formControlName="confirmacion"></ion-input>
        </ion-item>

        <ion-button expand="block" type="submit" [disabled]="recoveryForm.invalid">
          Guardar
        </ion-button>
      </form>
    </ion-card-content>

    <ion-card-content *ngIf="stepCompleted">
      <ion-text color="success">
        <p>Contraseña cambiada con éxito.</p>
      </ion-text>
      <ion-button expand="block" routerLink="/login">Volver al Login</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>
